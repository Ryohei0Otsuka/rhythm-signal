# Rhythm Signal（耳コピ支援ツール / リズム特化）

音程は捨てた。  
スケール・コード構造が分かればポジションで辿れる。  
苦手なのは「リズムパターン」──そこだけ覗くための耳コピ支援ツールです。

---

## できること（MVP）

- 音源（mp3 / wav 等）を読み込み・再生
- 音の“強い瞬間”（瞬間最大に近いピーク）を検知して縦線表示
- 2小節ぶんの拍グリッド（4/4想定）を表示
- 再生位置に合わせて拍の瞬間にモニタが赤く点灯

目的：
リズムが凝っている曲の「拍の当たり」と「アクセント位置」を視覚的に抜くこと。

---

## 使い方

1. アプリ起動
2. `Open` から音源を選択（mp3推奨）
3. `Play / Pause`（Space）で再生
4. BPMを手入力（まずは体感で近い値）
5. 1拍目を合わせたい位置で `Set 1st Beat Here`
6. ヒット線と拍グリッドのズレからリズム構造を推測

---

## 耳コピ勢向け運用メモ

- BPMは最初から正確でなくていい
- 小節頭（1拍目）さえ合えば、ズレが情報になる
- ヒット線はキック／スネア／強アタックの代理
- 完璧な打点検出ではないが、耳の補助として機能する

---

## 仕様

- 音程検出は行わない
- 強い音 ＝ 短窓での最大振幅 ＋ 簡易ピーク抽出
- 4/4拍子前提（将来拡張想定）

---

## 制限事項

- Auto BPM は librosa 未導入時は無効
- ボーカル子音などにもヒット反応する
- 変拍子やテンポ揺れには弱い（MVP設計）

---

## 開発環境

- Python 3.13
- PySide6
- pyqtgraph
- numpy
- soundfile
- pydub
- FFmpeg（mp3対応）

---

## インストール（開発）

pip install -r requirements.txt

---

## 実行

python main.py

---

## Windowsビルド（PyInstaller）

前提：
プロジェクト直下に `bin/ffmpeg.exe` が存在すること。
（GitHubには含めない。配布物に同梱）

python -m PyInstaller --noconfirm --clean --windowed --name RhythmSignal --add-binary "bin\ffmpeg.exe;bin" main.py

生成物：
dist/RhythmSignal/RhythmSignal.exe

---

## 開発ログ（Vibe Coding）

このツールは「精密な音楽解析ソフト」を目指したものではない。

・音程は切り捨てる  
・リズムだけを見る  
・まずは視覚化して体感する  

という割り切りから始まった。

仕様は後から整えたが、
最初は「赤く光れば今が拍だろ」という直感から作っている。

精度よりも、

“耳の補助として機能するか”

を優先したバイブコーディングの記録。

---

## 今後やりたいこと

- 周波数帯別ヒット色分け（キック／スネア推定）
- 小節数可変表示
- テンポ揺れ補助
- 変拍子対応

---

## ライセンス

未設定（公開時は MIT 推奨）